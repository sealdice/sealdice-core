# 海豹扩展包使用指南

本文档面向海豹骰的普通用户，介绍如何安装和管理扩展包。

## 什么是扩展包？

扩展包（`.sealpkg` 文件）是海豹骰的功能扩展，可以为你的骰子添加：

- 新的指令和功能
- 牌堆和随机表
- 自定义回复
- 帮助文档
- 以及更多...

与以前需要手动复制多个文件到不同目录相比，扩展包只需一键安装，也能一键卸载，不会把文件散落得到处都是。

## 安装扩展包

### 方法一：从扩展商店安装（推荐）

1. 打开海豹 WebUI
2. 进入「扩展管理」→「扩展商店」
3. 浏览或搜索想要的扩展
4. 点击「安装」

### 方法二：从文件安装

1. 获取 `.sealpkg` 扩展包文件
2. 打开海豹 WebUI
3. 进入「扩展管理」→「本地扩展」
4. 点击「安装扩展包」，选择文件上传

### 方法三：从链接安装

1. 复制扩展包的下载链接
2. 在「扩展管理」中点击「从URL安装」
3. 粘贴链接并确认

## 管理扩展包

### 查看已安装的扩展

在「扩展管理」→「本地扩展」中可以看到所有已安装的扩展包，包括：

- 扩展名称和版本
- 作者信息
- 启用/禁用状态
- 简介描述

### 启用/禁用扩展

- 点击扩展卡片上的开关可以启用或禁用
- 禁用后扩展的功能将不可用，但文件和配置会保留
- 如果扩展 A 依赖扩展 B，禁用 B 时会提示你

### 配置扩展

部分扩展提供可配置选项：

1. 点击扩展卡片上的「设置」图标
2. 在弹出的配置界面中修改选项
3. 保存后立即生效

### 更新扩展

当扩展有新版本时：

1. 在扩展卡片上会显示更新提示
2. 点击「更新」下载并安装新版本
3. 你的配置会自动保留

### 卸载扩展

点击扩展卡片上的「卸载」按钮，可以选择：

- **完全卸载**：删除扩展和所有相关数据
- **保留数据**：删除扩展但保留你的配置和存档
- **仅禁用**：不删除任何文件，只是停用

## 扩展权限

为了保护你的安全，扩展包需要声明它需要的权限。安装时你可以看到扩展请求了哪些权限：

| 权限 | 说明 | 风险等级 |
|-----|------|---------|
| 网络访问 | 可以访问互联网 | 中 |
| 文件读取 | 可以读取特定文件 | 低 |
| 文件写入 | 可以写入特定文件 | 中 |
| 危险操作 | 可以执行系统命令 | 高 |

**建议**：
- 只安装来自可信来源的扩展
- 注意查看扩展请求的权限是否合理
- 商店中的扩展经过基本审核，相对安全

## 常见问题

### Q: 扩展安装后不生效？

1. 确认扩展已启用（开关打开）
2. 尝试重启海豹核心
3. 查看日志中是否有错误信息

### Q: 两个扩展冲突怎么办？

禁用其中一个，或联系扩展作者反馈问题。

### Q: 扩展包安装在哪里？

扩展包安装在 `data/packages/` 目录下，每个扩展有独立的子目录。但一般不需要手动操作这些文件。

### Q: 能同时使用扩展包和传统插件吗？

可以。扩展包和传统的 JS 插件、牌堆文件可以共存。

### Q: 如何备份扩展配置？

扩展的用户数据保存在各自的 `_userdata/` 目录中，备份 `data/packages/` 目录即可。

## 安全提示

1. **来源可信**：优先从官方商店安装扩展
2. **权限审查**：安装前查看扩展请求的权限
3. **及时更新**：保持扩展为最新版本以获得安全修复
4. **问题反馈**：发现可疑行为请向社区反馈
