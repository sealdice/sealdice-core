---
lang: zh-cn
title: 扩展：日志
---

# 扩展：日志

::: info 本节内容

本节将展示记录跑团日志相关的指令，请善用侧边栏和搜索，按需阅读文档。

:::

## `.log` 跑团日志

### 记录日志

对于每个群组，有若干个**日志记录**和一个**当前日志**。日志记录是本群记录过的所有日志。当前日志指向本群的其中一个日志记录，可以为空，但不会存在多个。

::: info 注意

海豹核心的日志记录只在骰子启用时进行。

即，如果你在一个群中通过 `.bot off` 关闭了骰子，即使有记录中的日志，也会暂停。

:::

`.log new <日志名>`

新建一份日志，并且开始记录。

如果本群的当前日志不为空，则不能创建。如果创建成功，将本群的当前日志设定成新日志。

`.log on (<日志名>)`

如果不指定日志名，如果当前日志存在，则开始记录本群的当前日志。

如果指定日志名，则开始记录指定的日志，当前日志设定为指定的日志。

`.log off`

暂停记录当前日志。

`.log halt` / `.log end`

停止记录当前日志，将本群的当前日志设定为空。

如果使用的是 `.log end`，还会向海豹日志染色器上传日志，并返回一个获取链接。

停止的日志并不会丢失，仍然存在于本群的日志记录中，可以使用 `.log on <日志名>` 继续记录。

### 数据统计

`.log stat (<日志名>)` / `.stat log (<日志名>)`

统计指定日志中检定的成功失败数量，与角色的属性数值变化。

如果本群的当前日志不为空，可以省略日志名，统计当前日志。

### 管理日志

`.log list`

列出本群的所有日志记录。

`.log get <日志名>`

重新获取指定日志的染色器链接。

`.log del <日志名>`

删除指定日志。

::: info 注意

删除的日志在海豹核心中永远失去，无法再继续记录。

如果已经上传到染色器，该链接仍然可以使用。你也可以在海豹核心中的 `data/default/log-exports/` 目录寻找日志的文件快照。

:::

### 骰主代取 Log

对于已经解散/退出的群聊，如果还想要取出其中的日志，需要知道对应的群号。

你可在任意有 Master 权限的交互平台做以下操作：

首先使用 `.log list <群号>` 列出该群的所有日志记录。

然后，使用 `.log masterget <群号> <日志名>` 获取指定日志记录的染色器链接。

::: info UI 中管理跑团 Log

作为骰主，你也可以在管理后台的 扩展功能 - 跑团日志 界面，管理所有群的所有日志。

:::

## `.ob` 旁观

`.ob`

让使用者成为观众。

这个指令的作用实际是给使用者的名字上前缀 `ob`。不会造成其他的效果。

对于海豹日志染色器，名字前缀有 ob 的用户发言可以被一键去除。

`.ob exit`

如果使用者的名字有`ob`前缀，这个指令将其去除。

## `.sn` 自动群名片

开启后，当用户角色卡的数值变化时，自动更新用户的群名片。

::: info 更改其他玩家的名片，需要骰子账号有适当的权限。

对于 QQ，这个权限是群主或群管理员。

:::

### 预设模板

`.sn coc` / `.sn cocL` ：`角色名 SAN70 HP14/14 DEX60`

克苏鲁的呼唤常用格式，使用 `cocL` 以在名片中使用小写字母。

`.sn dnd`：`角色名 HP10/10 AC8 DC6 PW8`

龙与地下城常用格式。

`.sn none`：`角色名`

空白名片，当角色名变化时也会自动更新。

### 扩展规则

有些插件提供的扩展规则也定义了名片模板。对于这样的扩展规则，可以使用 `.sn <规则名>` 使用其模板。

### 自定义模板

`.sn expr <模板>`

在模板中使用变量以自动更新。

例如，CoC 模板的等价写法是 `.sn expr {$t玩家_RAW} SAN{san} HP{hp}/{hpmax} DEX{dex}`

### 关闭自动修改

`.sn off`

## `.hiy` 数据统计

海豹核心不提供统计整体成功率的功能。
